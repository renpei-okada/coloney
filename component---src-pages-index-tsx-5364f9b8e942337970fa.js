(self.webpackChunkcolony_demo=self.webpackChunkcolony_demo||[]).push([[691],{5030:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return W}});var i=n(7294),o=function(){return"undefined"!=typeof window?window.devicePixelRatio:1},r=function(t){var e=(0,i.useRef)(null),n=(0,i.useState)({width:0,height:0}),r=n[0],a=n[1],s=(0,i.useRef)(!1),h=function(){var n=e.current;if(n){var i=n.getBoundingClientRect();a({width:i.width,height:i.height}),t.resized({width:i.width,height:i.height})}};return(0,i.useEffect)((function(){if(!s.current&&0!==r.width){s.current=!0;var n=e.current;if(!n)throw new Error("The canvas element couldn't initialized.");n.getContext("2d").scale(o(),o()),t.initialized(n.getContext("2d"),r)}}),[r]),(0,i.useEffect)((function(){return window.addEventListener("resize",h),function(){return window.removeEventListener("resize",h)}}),[]),(0,i.useEffect)((function(){h()}),[t.width,t.height]),i.createElement("canvas",{ref:e,width:r.width*o(),height:r.height*o(),style:{width:t.width,height:t.height}})},a=n(5991);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var c,l=function(){function t(t,e,n){this.subscription={end:function(){}},this.height=0,this.width=0,this._actors=[],this.renderer=n,this.width=t,this.height=e}var e=t.prototype;return e.append=function(t){this._actors.push(t),t.setup(this)},e.remove=function(t){this._actors=this.actors.filter((function(e){return e!==t}))},e.begin=function(){var t,e,n;this.end(),this.subscription=(t=this.tick.bind(this),e=Date.now(),n=0,function i(){t(.001*(Date.now()-e)),n=requestAnimationFrame(i),e=Date.now()}(),{end:function(){return cancelAnimationFrame(n)}});for(var i,o=s(this.actors);!(i=o()).done;){i.value.setup(this)}},e.end=function(){this.subscription.end()},e.tick=function(t){var e=this;this.renderer.clear(0,0,this.width,this.height);for(var n,i=function(){var i=n.value;i.update(t,e),i.isDestroyed&&(e._actors=e.actors.filter((function(t){return t!==i})))},o=s(this._actors);!(n=o()).done;)i()},e.press=function(t){for(var e,n=s(this.actors);!(e=n()).done;){e.value.pressed(t)}},(0,a.Z)(t,[{key:"actors",get:function(){return this._actors}}]),t}(),u=function(){function t(t){this.context=t}var e=t.prototype;return e.clear=function(t,e,n,i){var o=this.context;o.fillStyle="rgba(0,0,0,0)",o.clearRect(t,e,n,i)},e.drawCircle=function(t,e,n,i){var o=this.context;o.fillStyle=i.rgba,o.beginPath(),o.arc(t,e,n,0,2*Math.PI),o.closePath(),o.fill()},e.drawStrokeCircle=function(t,e,n,i,o){var r=this.context;r.strokeStyle=o.rgba,r.beginPath(),r.arc(t,e,n,0,2*Math.PI),r.closePath(),r.stroke()},e.drawLine=function(t,e,n,i,o,r){var a=this.context;a.strokeStyle=r.rgba,a.beginPath(),a.lineTo(t,e),a.lineTo(n,i),a.closePath(),a.lineWidth=o,a.stroke()},e.pushMatrix=function(){this.context.save()},e.popMatrix=function(){this.context.restore()},e.translate=function(t,e){this.context.translate(t,e)},e.beginPath=function(){this.context.beginPath()},e.closePathFill=function(t){this.context.closePath(),this.context.fillStyle=t.rgba,this.context.fill()},e.closePathStroke=function(t){this.context.closePath(),this.context.strokeStyle=t.rgba,this.context.stroke()},e.rotate=function(t){this.context.rotate(t)},e.lineTo=function(t,e){this.context.lineTo(t,e)},e.moveTo=function(t,e){this.context.lineTo(t,e)},t}(),d=n(3552),f=function(t,e){this.x=t,this.y=e};!function(t){t.PI2=3.14159265359,t.PI_TIMES_TWO2=6.28318530718;var e=t.PI=3.14159265359,n=t.PI_TIMES_TWO=6.28318530718;function i(t,e,n){return(1-n)*t+n*e}t.lerp=i,t.rotate=function(t,e){return new f(t.x*Math.cos(e)-t.y*Math.sin(e),t.x*Math.sin(e)+t.y*Math.cos(e))},t.lerpAngle=function(t,o,r){var a=0,s=o-t;return s<-e?(a=i(t,o+=n,r))>=n&&(a-=n):s>e?(a=i(t,o-=n,r))<0&&(a+=n):a=i(t,o,r),a},t.toRadians=function(t){return e/180*t},t.toAngle=function(t){return 180*t/e},t.dist=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.normalize=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?new f(0,0):new f(t.x/e,t.y/e)}}(c||(c={}));var g,p=function(){function t(t,e,n,i){if(this.r=0,this.g=0,this.b=0,this.a=1,"string"==typeof t){if(7!==t.length||"#"!==t[0])throw new Error("不正なカラーコードです。");var o=t;this.r=255&parseInt(o.slice(1,3),16),this.g=255&parseInt(o.slice(3,5),16),this.b=255&parseInt(o.slice(5,7),16),this.a=e||1}else{if("number"!=typeof t||"number"!=typeof e||"number"!=typeof n)throw new Error("不正なカラーコードです。");this.r=t,this.g=e,this.b=n,this.a=i||1}}t.fromHsv=function(e,n,i,o){void 0===o&&(o=1),e=(e<0?e%360+360:e)%360/60,n=n<0?0:n>1?1:n,i=i<0?0:i>1?1:i;var r=[5,3,1].map((function(t){return Math.round(255*(i-Math.max(0,Math.min(1,2-Math.abs(2-(e+t)%6)))*n*i))}));return new t(r[0],r[1],r[2],o)};var e=t.prototype;return e.toHsv=function(){var t=this.r,e=this.g,n=this.b,i=[t,e,n];if(void 0!==t&&void 0===e){var o=parseInt(t.toString().replace(/[^\da-f]/gi,"").replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"),16);i=[o>>16&255,o>>8&255,255&o]}else for(var r in i)i[r]=Math.max(0,Math.min(255,Math.floor(i[r])));t=i[0],e=i[1],n=i[2];var a=Math.max(t,e,n),s=a-Math.min(t,e,n),h=a?s/a:0,c=[t,e,n,t,e],l=c.indexOf(a);return{h:h?((c[l+1]-c[l+2])/s+2*l+6)%6*60:0,s:h,v:a/255,a:this.a}},t.fromColorCode=function(e,n){return void 0===n&&(n=1),new t(e,n)},e.toHexString=function(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)},(0,a.Z)(t,[{key:"rgba",get:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}}]),t}(),v=["#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"];!function(t){function e(t,e){return void 0===t&&(t=0),e?e?Math.floor(Math.random()*(e+1-t))+t:Math.floor(1e3*Math.random()):Math.floor(Math.random()*(t+1))}t.next=e,t.nextDouble=function(){return Math.random()},t.randomItem=function(t){return t[e(t.length-1)]},t.getRandomColor=function(){return p.fromColorCode(v[e(v.length-1)])}}(g||(g={}));var y=function(){function t(){this.tags=[],this.isDestroyed=!1}return t.prototype.destroy=function(){this.isDestroyed=!0},t}(),w=n(18),m=n(3349);function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var A=function(t){function e(e){var n;if((n=t.call(this)||this).location=new f(0,0),n.size=10,n.opacity=1,n.layerNum=6,e&&Object.assign((0,m.Z)(n),e),!n.layers){var i,o=null!==(i=n.color)&&void 0!==i?i:g.getRandomColor();n.layers=(0,w.Z)(new Array(n.layerNum)).map((function(t){return o})).map((function(t){var e=t.toHsv();return p.fromHsv(e.h,e.s-.3+.3*g.nextDouble(),e.v-.5+.5*g.nextDouble(),e.a)}))}return n}return(0,d.Z)(e,t),e.prototype.draw=function(t,e){for(var n,i=this.size,o=b(this.layers);!(n=o()).done;){var r=n.value;r.a=this.opacity,e.drawCircle(this.location.x,this.location.y,i,r),i=Math.max(0,i-.2*this.size)}},e}((function(){})),M=function(){function t(t){this.isDie=!1,this.vector={x:0,y:0},this.shape=new A({layersOverride:[g.getRandomColor(),g.getRandomColor(),g.getRandomColor(),g.getRandomColor()]}),this.location=t,this.size=3+g.nextDouble()}var e=t.prototype;return e.update=function(t,e){this.shape.draw(t,e.renderer)},e.translate=function(t){this.location.x+=t.x,this.location.y+=t.y},e.rotate=function(t){},(0,a.Z)(t,[{key:"location",get:function(){return this.shape.location},set:function(t){this.shape.location=t}},{key:"size",get:function(){return this.shape.size},set:function(t){this.shape.size=t}}]),t}(),S=function(){function t(t){this.waveOffcet=0,this.isDie=!1,this.speed=80,this.waveWidth=60,this.colony=t}return t.prototype.update=function(t,e){this.waveOffcet+=.1;var n=this.colony.location.y;this.colony.translate({x:Math.sin(this.waveOffcet)*this.waveWidth*t,y:this.speed*t}),n>=e.height&&(this.isDie=!0),this.colony.update(t,e)},t}();function z(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var T=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).foods=[],e}(0,d.Z)(e,t);var n=e.prototype;return n.setup=function(t){},n.update=function(t,e){for(var n,i=z(this.foods);!(n=i()).done;){var o=n.value;o.update(t,e),o.isDie&&this.remove(o.colony)}},n.remove=function(t){this.foods=this.foods.filter((function(e){return e.colony!==t}))},n.pressed=function(t){this.foods.push(new S(new M({x:t.position.x,y:0})))},e}(y),k=function(t){function e(e,n,i){var o;return void 0===n&&(n=125),void 0===i&&(i=.05),(o=t.call(this)||this).speed=1,o.speedBias=2,o.angle=0,o.food=null,o.autoTarget=!0,o.endForceTrack=null,o.shockAvoidDistance=80,o.shockThreshouldDistance=80,o.foodTriggerDistance=120,o.isShowEnabled=!0,o.isFoodEnabled=!0,o.foodViewableAngleDeg=160,o.foodProvider=null,o.smoothCurveTriggerDistance=1/0,o.noizeSize=1,o.c=g.getRandomColor(),o.debug=!1,o.colony=e,o.speedBias=n,o.smoothCurveRate=i,o}(0,d.Z)(e,t);var n=e.prototype;return n.setup=function(t){var e=t.actors.find((function(t){return t instanceof T}));e&&(this.foodProvider=e)},n.pressed=function(t){this.shock(t.position)},n.update=function(t,e){var n=this;this.endForceTrack&&this.endForceTrack();var i=this.colony.location;if(this.checkFoodAction(e),this.targetLocation||!this.autoTarget){if(this.targetLocation){this.debug&&e.renderer.drawCircle(this.targetLocation.x,this.targetLocation.y,20,new p(255,255,0));var o=this.targetLocation.x-i.x,r=this.targetLocation.y-i.y,a=function(){return.5*Math.random()*n.speed*n.noizeSize},s=Math.atan2(r,o);this.angle=c.lerpAngle(this.angle,s,this.smoothCurveRate),c.dist(this.targetLocation,i)>this.smoothCurveTriggerDistance&&(o=Math.cos(this.angle),r=Math.sin(this.angle));var h=c.normalize(new f(o,r)),l=h.x*this.speed+a(),u=h.y*this.speed+a();this.colony.translate(new f(l*t,u*t)),this.colony.rotate(this.angle),this.colony.update(t,e),c.dist(this.colony.location,this.targetLocation)<=20&&this.autoTarget&&!this.isForceTracking&&(this.targetLocation=void 0)}}else this.initTargetLocation(new f(g.next(e.width),g.next(e.height)))},n.initTargetLocation=function(t){this.targetLocation=t,this.speed=this.speedBias*(1+.5*g.nextDouble())},n.translateTargetLocation=function(t,e){this.isForceTracking||this.food||(e&&(this.speed=e),this.targetLocation?this.targetLocation={x:this.targetLocation.x+t.x,y:this.targetLocation.y+t.y}:this.targetLocation={x:t.x,y:t.y})},n.shock=function(t){var e=this,n=this.colony.location;if(c.dist(t,n)<=this.shockThreshouldDistance){this.endForceTrack&&this.endForceTrack();var i=c.normalize(new f(t.x-n.x,t.y-n.y)),o=n.x-i.x*this.shockAvoidDistance,r=n.y-i.y*this.shockAvoidDistance,a=this.speed,s=this.targetLocation;this.targetLocation=new f(o,r),this.speed=5*this.speedBias,this.endForceTrack=function(){e.targetLocation&&c.dist(e.colony.location,e.targetLocation)<=20&&(e.speed=a,e.targetLocation=s,e.endForceTrack=null)}}},n.checkFoodAction=function(t){var e=this,n=function(){if(e.foodProvider){var t=e.foodProvider.foods;if(t.length>0){for(var n=t[0].colony,i=1;i<t.length;i++)c.dist(e.colony.location,t[i].colony.location)<c.dist(e.colony.location,n.location)&&(n=t[i].colony);if(c.dist(e.colony.location,n.location)<=e.foodTriggerDistance){var o=Math.atan2(n.location.y-e.colony.location.y,n.location.x-e.colony.location.x),r=Math.atan2(e.colony.vector.y,e.colony.vector.x);if(Math.abs(r-o)<c.toRadians(.5*e.foodViewableAngleDeg))return n}}return null}}();if(n){if(this.food||this.endForceTrack)return;var i=this.targetLocation,o=this.speed;this.targetLocation=n.location,this.speed=1.8*this.speedBias,this.food=n,this.endForceTrack=function(){e.foodProvider&&(!e.food||c.dist(e.colony.location,e.food.location)<=10)&&(e.food&&e.foodProvider.remove(e.food),e.food=null,e.targetLocation=i,e.speed=o,e.endForceTrack=null)}}else this.food=null},(0,a.Z)(e,[{key:"isForceTracking",get:function(){return!!this.endForceTrack}}]),e}(y);function P(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var L=function(t){function e(e){var n;return(n=t.call(this,e)||this).boids=[],n.avoidThresholdDist=30,n.r1=8,n.r2=16,n.r3=2,n.angle=0,n.scene=null,n}(0,d.Z)(e,t);var n=e.prototype;return n.setup=function(e){t.prototype.setup.call(this,e);for(var n,i=P(this.boids);!(n=i()).done;){n.value.setup(e)}},n.addBoid=function(t){this.boids.push(t),this.scene&&t.setup(this.scene),t.autoTarget=!1,t.smoothCurveTriggerDistance=1/0,t.noizeSize=0},n.update=function(e,n){t.prototype.update.call(this,e,n);for(var i,o=P(this.boids);!(i=o()).done;){var r=i.value;this.drawAsBoid(r,e,n)}},n.drawAsBoid=function(t,e,n){var i,o,r,a,s=this.getMovementVector(t.colony),h=c.dist(t.colony.location,new f(s.x+(null!==(i=null===(o=t.targetLocation)||void 0===o?void 0:o.x)&&void 0!==i?i:0),s.y+(null!==(r=null===(a=t.targetLocation)||void 0===a?void 0:a.y)&&void 0!==r?r:0)));t.translateTargetLocation(new f(s.x,s.y),h),t.update(e,n)},n.getMovementVector=function(t){var e=0,n=0,i=this.getVectorToCenter(t);return e+=i.x*this.r1,n+=i.y*this.r1,e+=(i=this.getVectorToAvoid(t)).x*this.r2,n+=i.y*this.r2,e+=(i=this.getVectorToAverage(t)).x*this.r3,n+=i.y*this.r3,{x:e/=3,y:n/=3}},n.getVectorToCenter=function(t){for(var e,n=0,i=0,o=t.location.x,r=t.location.y,a=P(this.boids);!(e=a()).done;){var s=e.value;if(s.colony!==t){var h=s.colony.location;n+=h.x,i+=h.y}}var l=this.boids.length-1;return n/=l,i/=l,n+=this.boss.location.x,i+=this.boss.location.y,n/=2,i/=2,c.normalize(new f(n-o,i-r))},n.getVectorToAvoid=function(t){for(var e,n=this.avoidThresholdDist,i=0,o=0,r=P(this.boids);!(e=r()).done;){var a=e.value;if(a.colony!==t){var s=a.colony.location;c.dist(s,t.location)<n&&(i-=s.x-t.location.x,o-=s.y-t.location.y)}}var h=this.boss;return c.dist(h.location,t.location)<n&&(i-=h.location.x-t.location.x,o-=h.location.y-t.location.y),c.normalize(new f(i,o))},n.getVectorToAverage=function(t){for(var e,n=0,i=0,o=P(this.boids);!(e=o()).done;){var r=e.value;if(r.colony!==t){var a=r.colony.vector;n+=a.x,i+=a.y}}n+=this.boss.vector.x,i+=this.boss.vector.y;var s=this.boids.length;return n/=s,i/=s,c.normalize(new f(n,i))},n.shock=function(e){t.prototype.shock.call(this,e);for(var n,i=P(this.boids);!(n=i()).done;){n.value.shock(e)}},(0,a.Z)(e,[{key:"boss",get:function(){return this.colony}}]),e}(k),D=function(){function t(t,e){void 0===t&&(t=new f(0,0)),this.segmentlocation=new Array(10),this.location=new f(0,0),this.segLength=14,this.size=.22,this.finAngle=0,this.finDirection=30,this.lightSegmentIndex=-1,this.isFlicking=!1,this.angle=0,this.isFlicking_=!1,this.vector=new f(0,0),this.location=t;for(var n=0;n<10;n++)this.segmentlocation[n]=new f(0,0);this.color=e||g.getRandomColor()}var e=t.prototype;return e.rotate=function(t){this.angle=t},e.beginBrightness=function(){},e.translate=function(t){this.vector=t},e.update=function(t,e){this.location.x+=this.vector.x,this.location.y+=this.vector.y,this.drawSegment(0,this.location.x,this.location.y,e,t);for(var n=0;n<8;n++)this.drawSegment(n+1,this.segmentlocation[n].x,this.segmentlocation[n].y,e,t)},e.drawSegment=function(t,e,n,i,o){var r=e-this.segmentlocation[t].x,a=n-this.segmentlocation[t].y,s=Math.atan2(a,r),h=this.segmentlocation[t].x=e-Math.cos(s)*this.segLength*this.size,l=this.segmentlocation[t].y=n-Math.sin(s)*this.segLength*this.size,u=i.renderer;this.lightSegmentIndex,1===t?(this.finAngle=c.lerp(this.finAngle,this.finDirection,.04)*o,this.finAngle>=13&&(this.finDirection=0),this.finAngle<=2&&(this.finDirection=15),u.drawLine(h+10*Math.cos(s+c.toRadians(120))*this.size,l+10*Math.sin(s+c.toRadians(120))*this.size,h+45*Math.cos(s+c.toRadians(145+this.finAngle))*this.size,l+45*Math.sin(s+c.toRadians(145+this.finAngle))*this.size,3*this.size,this.color),u.drawLine(h+10*Math.cos(s+c.toRadians(-120))*this.size,l+10*Math.sin(s+c.toRadians(-120))*this.size,h+45*Math.cos(s+c.toRadians(-145-this.finAngle))*this.size,l+45*Math.sin(s+c.toRadians(-145-this.finAngle))*this.size,3*this.size,this.color),u.drawCircle(h+45*Math.cos(s+c.toRadians(145+this.finAngle))*this.size,l+45*Math.sin(s+c.toRadians(145+this.finAngle))*this.size,4*this.size,this.color),u.drawCircle(h+45*Math.cos(s+c.toRadians(-145-this.finAngle))*this.size,l+45*Math.sin(s+c.toRadians(-145-this.finAngle))*this.size,4*this.size,this.color),u.drawCircle(this.segmentlocation[t].x,this.segmentlocation[t].y,1.2*(10-t)*this.size,this.color)):t%2==1?(u.drawCircle(this.segmentlocation[t].x,this.segmentlocation[t].y,1.5*this.size,this.color),u.drawStrokeCircle(this.segmentlocation[t].x,this.segmentlocation[t].y,1.2*(10-t)*this.size,7,this.color)):u.drawCircle(this.segmentlocation[t].x,this.segmentlocation[t].y,.5*(10-t)*this.size,this.color)},t}(),F=function(){function t(t){void 0===t&&(t=new f(0,0)),this.capPointAngle=Array(10),this.capPointAngleBase=0,this.capPointAngleBaseSpd=0,this.angle=0,this.vector=new f(0,0),this.location=t;var e=g.getRandomColor();this.headFillPaintColor=new p(e.r,e.g,e.b,.6),this.paintColor=new p(e.r,e.g,e.b,.6),this.capPointAngleBaseSpd=.4+.25*g.nextDouble(),this.headSize=6+(g.next(5)+g.nextDouble()),this.headWitherPower=.11}var e=t.prototype;return e.update=function(t,e){this.draw(t,e)},e.draw=function(t,e){var n=e.renderer;n.pushMatrix(),n.translate(this.location.x,this.location.y),n.rotate(this.angle+c.toRadians(90));for(var i=0;i<9;i++)this.capPointAngle[i]=this.capPointAngle[i+1]+i;this.capPointAngleBase+=this.capPointAngleBaseSpd*t,this.capPointAngle[9]=30*Math.abs(Math.sin(this.capPointAngleBase))+20,this.drawFillHead(n),this.drawHeadFrame(n),n.popMatrix()},e.translate=function(t){this.location.x+=t.x,this.location.y+=t.y,this.vector=t},e.rotate=function(t){this.angle=t},e.drawHeadFrame=function(t){t.beginPath();for(var e=90;e<=270;e+=30)for(var n=0,i=0,o=0,r=0,a=1,s=0;s<10;s++){a-=this.headWitherPower;var h=this.capPointAngle[s];n+=Math.sin(c.toRadians(h))*this.headSize*Math.sin(c.toRadians(e))*a,i+=Math.cos(c.toRadians(h))*this.headSize,o+=Math.sin(c.toRadians(h))*this.headSize*Math.sin(c.toRadians(e+30))*a,r+=Math.cos(c.toRadians(h))*this.headSize,t.lineTo(n,i),t.lineTo(o,r)}t.closePathFill(this.paintColor)},e.drawFillHead=function(t){var e=1,n=0,i=0;t.beginPath(),t.moveTo(0,0);for(var o=90,r=0;r<10;r++){e-=this.headWitherPower;var a=this.capPointAngle[r];n+=Math.sin(c.toRadians(a))*this.headSize*Math.sin(c.toRadians(o))*e,i+=Math.cos(c.toRadians(a))*this.headSize,t.lineTo(n,i)}e=1,n=0,i=0,o=270;for(var s=[],h=0;h<10;h++){e-=this.headWitherPower;var l=this.capPointAngle[h];n+=Math.sin(c.toRadians(l))*this.headSize*Math.sin(c.toRadians(o))*e,i+=Math.cos(c.toRadians(l))*this.headSize,s.unshift(new f(n,i))}for(var u=0,d=s;u<d.length;u++){var g=d[u];t.lineTo(g.x,g.y)}t.closePathFill(this.headFillPaintColor)},t}();function I(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var E=function(){function t(t){var e=this;this.wave=0,this.angle=0,this.wave2=0,this.color=g.getRandomColor(),this.segmentLength=g.next(18,23),this.maxSegmentPointSize=5,this.speed=.1,this.points=[],this.pointFlickingSpeeds=[],this.location=new f(0,0),this.vector=new f(0,0),this.wave2=g.next(1e3),this.segments=3+g.next(8),this.angle=g.next(0,360),this.points=(0,w.Z)(new Array(this.segments)).map((function(t){return g.next(e.segments)+g.nextDouble()})),this.pointFlickingSpeeds=(0,w.Z)(new Array(this.segments)).map((function(t){return g.next(20,30)})),console.log(this.points)}var e=t.prototype;return e.update=function(t,e){var n=e.renderer;n.pushMatrix(),n.translate(this.location.x,this.location.y),n.rotate(c.toRadians(this.angle));for(var i=this.wave,o=this.segments,r=this.wave2,a=this.color,s=new p(a.r,a.g,a.b,.26),h=new p(a.r,a.g,a.b,.8),l=this.segmentLength,u=this.maxSegmentPointSize,d=this.points,f=this.pointFlickingSpeeds,v=0;v<o;v++){g.next(u-1),g.nextDouble();var y=5*Math.sin(r)+10*Math.sin(i)+.1*g.nextDouble()*(0===g.next(0,1)?-1:1),w=c.lerp(l,.5*l,v/o);d[v]+=f[v]*t;var m=Math.abs(Math.sin(d[v]))*u;n.rotate(c.toRadians(y)),n.drawLine(0,0,0,w,m,s),n.drawCircle(0,0,.5*m,h),n.translate(0,w),r+=.1*this.speed*t,i+=this.speed}n.drawCircle(0,0,Math.abs(Math.sin(d[0]))*u*.5,h),this.wave2=r,this.wave+=this.speed*t,n.popMatrix()},e.pressed=function(t){},e.translate=function(t){},e.rotate=function(t){},t}(),O=function(t){(0,d.Z)(n,t);var e=n.prototype;function n(e){var n;(n=t.call(this)||this).location=new f(0,0),n.vector=new f(0,0),n.branchCount=20,n.branches=[],n.jointLayerColors=[g.getRandomColor(),g.getRandomColor(),g.getRandomColor(),g.getRandomColor()],n.jointCircleSize=14,e&&Object.assign((0,m.Z)(n),e);for(var i=[],o=0;o<n.branchCount;o++)i.push(new E);return n.branches=i,n}return e.setup=function(t){},e.pressed=function(t){},e.translate=function(t){this.vector=t,this.location=new f(this.location.x+t.x,this.location.y+t.y)},e.update=function(t,e){for(var n,i=e.renderer,o=I(this.branches);!(n=o()).done;){var r=n.value;r.location=this.location,r.update(t,e)}for(var a,s=this.jointCircleSize,h=I(this.jointLayerColors);!(a=h()).done;){var c=a.value;i.drawCircle(this.location.x,this.location.y,s,c),s-=3}},e.rotate=function(t){},n}(y);function B(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var $=function(){function t(t){this.shape=new A,this.locatoin=new f(300,300),this.vector=new f(0,0),this.growingSpeed=40,this.paledOutSpeed=1,this.location=t}var e=t.prototype;return e.translate=function(t){},e.update=function(t,e){var n=this.shape;n.opacity-=1*t,n.size+=this.growingSpeed*t,n.draw(t,e.renderer)},e.rotate=function(t){throw new Error("Method not implemented.")},(0,a.Z)(t,[{key:"location",get:function(){return this.shape.location},set:function(t){this.shape.location=t}},{key:"isDie",get:function(){return this.shape.opacity<0}}]),t}(),_=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).ripples=[],e}(0,d.Z)(e,t);var n=e.prototype;return n.setup=function(t){},n.update=function(t,e){for(var n,i=this,o=function(){var o=n.value;o.update(t,e),o.isDie&&(i.ripples=i.ripples.filter((function(t){return o!==t})))},r=B(this.ripples);!(n=r()).done;)o()},n.pressed=function(t){this.ripples.push(new $(t.position))},e}(y),H=null,V=function(t,e){H=new l(e.width,e.height,new u(t)),console.log(e),H.append(new T),H.append(new _),H.append(new O({location:new f(400,400)})),H.append(new k(new F(new f(240,280)),6)),H.append(new k(new F(new f(120,360)),6));var n=new k(new F(new f(220,500)),6);H.append(n);for(var i=0,o=["#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#f44336","#e91e63","#9c27b0"];i<o.length;i++){var r=o[i],a=p.fromColorCode(r),s=new L(new D(new f(0,0),a));H.append(s);for(var h=0;h<5;h++){var c=new D(new f(0,0),a),d=new k(c);s.addBoid(d)}}H.begin(),window.addEventListener("pointerdown",(function(t){H.press({key:"mouse",position:{x:t.clientX,y:t.clientY}})}))},W=function(){var t=i.useState({width:0,height:0}),e=t[0],n=t[1];return i.useEffect((function(){n({width:window.innerWidth,height:window.innerHeight})}),[]),i.createElement("div",{style:{height:"100vh",width:"100vw"}},i.createElement(r,{width:e.width+"px",height:e.height+"px",resized:function(t){H&&(H.width=t.width,H.height=t.height)},initialized:V}))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-5364f9b8e942337970fa.js.map